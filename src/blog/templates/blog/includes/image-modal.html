{% load i18n static wagtailcore_tags wagtailimages_tags user_tags %}

{% block content %}
<div class="image-modal">
    <span class="close-image-modal">&times;</span>
    <div class="image-modal-content flex flex-col items-center gap-2 p-8">
        <img src="" alt="" class="image-modal-image">
        <p class="image-modal-caption text-white"></p>
    </div>
</div>

<script>
    // Get modal elements by their class names
    const modal = document.querySelector(".image-modal");
    const modalContent = document.querySelector('.image-modal-content');
    const openModal = document.querySelectorAll('.open-image-modal');
    const closeModal = document.querySelector(".close-image-modal");

    // For each open-modal element check if it is clicked and open the clicked one
    openModal.forEach(btn => btn.addEventListener('click', () => {
        const modalinfo = btn.parentNode.childNodes[7];

        modalContent.querySelector(".image-modal-image").outerHTML = modalinfo.children[0].outerHTML;
        modalContent.querySelector(".image-modal-caption").textContent = modalinfo.children[1].textContent;

        modal.style.display = "block";
    }))

    // Close modal if the close button is clicked
    closeModal.addEventListener('click', () => {
        modal.style.display = "none";
    })

    // Close modal if the user clicks anywhere outside of the modals content
    modal.addEventListener('click', (e) => {
        if(e.target.className === 'image-modal') {
            modal.style.display = "none";
        }
    })
</script>

<style>
    .image-modal {
        display: none; 
        position: fixed; 
        z-index: 10; 
        padding-top: 100px;
        left: 0;
        top: 0;
        width: 100%; 
        height: 100%; 
        overflow: auto; 
        background-color: rgb(0,0,0);
        background-color: rgba(0,0,0,0.9);
    }

    .close-image-modal {
        position: absolute;
        top: 15px;
        right: 35px;
        color: #f1f1f1;
        font-size: 40px;
        font-weight: bold;
        transition: 0.3s;
    }

    .close-image-modal:hover,
    .close-image-modal:focus {
        color: #bbb;
        text-decoration: none;
        cursor: pointer;
    }
</style>
{% endblock %}

