{% load wagtailcore_tags wagtailimages_tags user_tags %}

<div class="max-w-3xl md:max-w-5xl mx-auto p-4 mb-4 drop-shadow-lg">

    <form method="get" action="" class=" bg-blue-800 p-4 rounded-lg">
        <h3 class="text-lg font-semibold mb-4 text-white">Filter by Author</h3>
        <div class="flex flex-wrap gap-2 mb-4">
            {% for author in authors %}
            <button type="submit" name="author" value="{{ author.username }}" title="{% user_display_name author %}" class="flex bg-white justify-center items-center border-4 aspect-square rounded-full {% if request.GET.author == author.username %} border-yellow-500 {% else %} border-transparent {% endif %}">
                {% if author.wagtail_userprofile.avatar %}
                    {% user_avatar author 'aspect-square w-8 h-8 rounded-full object-cover' %}
                {% else %}
                <svg class="w-8 h-8 rounded-full object-cover" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 13a3 3 0 100-6 3 3 0 000 6z"></path>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21v-2a4 4 0 00-4-4H7a4 4 0 00-4 4v2"></path>
                </svg>
                {% endif %}
                <span class="sr-only">{{ author.get_full_name|default:author.username }}</span>
            </button>
            {% endfor %}
        </div>

        <h3 class="text-lg font-semibold mb-4 text-white">Filter by Date</h3>
        <div class="flex flex-wrap gap-4 mb-4">
            <div>
                <label for="date_from" class="block text-sm font-medium text-white mb-1">From:</label>
                <input type="date" id="date_from" name="date_from" value="{{ request.GET.date_from }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
            </div>
            <div>
                <label for="date_to" class="block text-sm font-medium text-white mb-1">To:</label>
                <input type="date" id="date_to" name="date_to" value="{{ request.GET.date_to }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
            </div>
        </div>

        <div class="flex justify-between items-center">
            <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors">Apply Filters</button>
            <a href="{% pageurl page %}" class="bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400 transition-colors">Reset Filters</a>
        </div>
    </form>

</div>